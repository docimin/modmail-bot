import{_ as ve,S as pe,i as me,s as ge,a as R,l as w,r as F,L as be,h as m,c as j,m as D,n as V,u as z,p as b,b as T,H as y,t as L,d as ee,f as N,o as ke,g as te,w as se,x as le,y as ae,E as B,B as re,a0 as H,I as A,a1 as P,a6 as ie,Z as ye,G,v as J,a7 as ne,a8 as oe,V as ce,a9 as ue,a5 as Ie,aa as fe,q as C}from"../chunks/index-dd217174.js";import{R as de}from"../chunks/Rolling-44ec13db.js";import{c as Ee,b as we,q as De}from"../chunks/index-ae3f141b.js";function _e(f,{from:t,to:e},a={}){const s=getComputedStyle(f),l=s.transform==="none"?"":s.transform,[c,I]=s.transformOrigin.split(" ").map(parseFloat),r=t.left+t.width*c/e.width-(e.left+c),n=t.top+t.height*I/e.height-(e.top+I),{delay:i=0,duration:p=_=>Math.sqrt(_)*120,easing:u=Ee}=a;return{delay:i,duration:ve(p)?p(Math.sqrt(r*r+n*n)):p,easing:u,css:(_,U)=>{const M=U*r,E=U*n,$=_+U*t.width/e.width,o=_+U*t.height/e.height;return`transform: ${l} translate(${M}px, ${E}px) scale(${$}, ${o});`}}}const{Map:he}=Ie;function Z(f,t,e){const a=f.slice();return a[16]=t[e],a}function K(f,t,e){const a=f.slice();return a[19]=t[e],a}function Ue(f){let t,e,a;return e=new de({props:{style:"transform: scale(.2);"}}),{c(){t=w("div"),se(e.$$.fragment),this.h()},l(s){t=D(s,"DIV",{class:!0});var l=V(t);le(e.$$.fragment,l),l.forEach(m),this.h()},h(){b(t,"class","loading svelte-cs31s5")},m(s,l){T(s,t,l),ae(e,t,null),a=!0},p:B,i(s){a||(N(e.$$.fragment,s),a=!0)},o(s){L(e.$$.fragment,s),a=!1},d(s){s&&m(t),re(e)}}}function $e(f){var k;let t,e,a,s,l,c,I,r,n,i=[],p=new he,u,_,U;const M=[Me,Ve],E=[];function $(d,g){return d[6]?0:1}l=$(f),c=E[l]=M[l](f);let o=((k=f[2])==null?void 0:k.length)>0&&Q(f),h=f[0];const v=d=>d[16];for(let d=0;d<h.length;d+=1){let g=Z(f,h,d),O=v(g);p.set(O,i[d]=x(O,g))}return{c(){t=w("form"),e=w("input"),a=R(),s=w("button"),c.c(),I=R(),o&&o.c(),r=R(),n=w("div");for(let d=0;d<i.length;d+=1)i[d].c();this.h()},l(d){t=D(d,"FORM",{class:!0});var g=V(t);e=D(g,"INPUT",{type:!0,placeholder:!0,class:!0}),a=j(g),s=D(g,"BUTTON",{class:!0});var O=V(s);c.l(O),O.forEach(m),g.forEach(m),I=j(d),o&&o.l(d),r=j(d),n=D(d,"DIV",{class:!0});var S=V(n);for(let q=0;q<i.length;q+=1)i[q].l(S);S.forEach(m),this.h()},h(){b(e,"type","text"),b(e,"placeholder","User ID / Role ID"),e.disabled=f[6],b(e,"class","svelte-cs31s5"),s.disabled=f[6],b(s,"class","svelte-cs31s5"),b(t,"class","svelte-cs31s5"),b(n,"class","list svelte-cs31s5")},m(d,g){T(d,t,g),y(t,e),H(e,f[5]),y(t,a),y(t,s),E[l].m(s,null),T(d,I,g),o&&o.m(d,g),T(d,r,g),T(d,n,g);for(let O=0;O<i.length;O+=1)i[O].m(n,null);u=!0,_||(U=[A(e,"input",f[10]),A(t,"submit",P(f[11]))],_=!0)},p(d,g){var S;(!u||g&64)&&(e.disabled=d[6]),g&32&&e.value!==d[5]&&H(e,d[5]);let O=l;if(l=$(d),l!==O&&(te(),L(E[O],1,1,()=>{E[O]=null}),ee(),c=E[l],c||(c=E[l]=M[l](d),c.c()),N(c,1),c.m(s,null)),(!u||g&64)&&(s.disabled=d[6]),((S=d[2])==null?void 0:S.length)>0?o?(o.p(d,g),g&4&&N(o,1)):(o=Q(d),o.c(),N(o,1),o.m(r.parentNode,r)):o&&(o.d(1),o=null),g&275){h=d[0];for(let q=0;q<i.length;q+=1)i[q].r();i=ie(i,g,v,1,d,h,p,n,fe,x,null,Z);for(let q=0;q<i.length;q+=1)i[q].a()}},i(d){if(!u){N(c),N(o);for(let g=0;g<h.length;g+=1)N(i[g]);u=!0}},o(d){L(c),u=!1},d(d){d&&m(t),E[l].d(),d&&m(I),o&&o.d(d),d&&m(r),d&&m(n);for(let g=0;g<i.length;g+=1)i[g].d();_=!1,ye(U)}}}function Ve(f){let t,e;return{c(){t=w("img"),this.h()},l(a){t=D(a,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){G(t.src,e="/assets/icons/plus.svg")||b(t,"src",e),b(t,"alt","add"),b(t,"class","svelte-cs31s5")},m(a,s){T(a,t,s)},i:B,o:B,d(a){a&&m(t)}}}function Me(f){let t,e;return t=new de({props:{scaleFactor:.1}}),{c(){se(t.$$.fragment)},l(a){le(t.$$.fragment,a)},m(a,s){ae(t,a,s),e=!0},i(a){e||(N(t.$$.fragment,a),e=!0)},o(a){L(t.$$.fragment,a),e=!1},d(a){re(t,a)}}}function Q(f){let t,e=[],a=new he,s,l,c=f[2];const I=r=>r[19];for(let r=0;r<c.length;r+=1){let n=K(f,c,r),i=I(n);a.set(i,e[r]=X(i,n))}return{c(){t=w("div");for(let r=0;r<e.length;r+=1)e[r].c();s=R(),l=w("div"),this.h()},l(r){t=D(r,"DIV",{class:!0});var n=V(t);for(let i=0;i<e.length;i+=1)e[i].l(n);n.forEach(m),s=j(r),l=D(r,"DIV",{class:!0}),V(l).forEach(m),this.h()},h(){b(t,"class","small-list svelte-cs31s5"),b(l,"class","divider svelte-cs31s5")},m(r,n){T(r,t,n);for(let i=0;i<e.length;i+=1)e[i].m(t,null);T(r,s,n),T(r,l,n)},p(r,n){if(n&268){c=r[2];for(let i=0;i<e.length;i+=1)e[i].r();e=ie(e,n,I,1,r,c,a,t,fe,X,null,K);for(let i=0;i<e.length;i+=1)e[i].a()}},i(r){for(let n=0;n<c.length;n+=1)N(e[n])},o:B,d(r){r&&m(t);for(let n=0;n<e.length;n+=1)e[n].d();r&&m(s),r&&m(l)}}}function W(f){let t,e,a=f[3].get(f[19]).name+"",s;return{c(){t=w("div"),e=F("@"),s=F(a),this.h()},l(l){t=D(l,"DIV",{class:!0,style:!0});var c=V(t);e=z(c,"@"),s=z(c,a),c.forEach(m),this.h()},h(){b(t,"class","role-name svelte-cs31s5"),C(t,"--role-clr",f[3].get(f[19]).color),C(t,"--role-clr-24",f[3].get(f[19]).color+"BF"),C(t,"--role-clr-56",f[3].get(f[19]).color+"F0")},m(l,c){T(l,t,c),y(t,e),y(t,s)},p(l,c){c&12&&a!==(a=l[3].get(l[19]).name+"")&&J(s,a),c&12&&C(t,"--role-clr",l[3].get(l[19]).color),c&12&&C(t,"--role-clr-24",l[3].get(l[19]).color+"BF"),c&12&&C(t,"--role-clr-56",l[3].get(l[19]).color+"F0")},d(l){l&&m(t)}}}function X(f,t){let e,a=t[3].has(t[19]),s,l,c=t[19]+"",I,r,n,i,p,u,_,U,M=B,E,$,o=a&&W(t);function h(){return t[12](t[19])}return{key:f,first:null,c(){e=w("div"),o&&o.c(),s=R(),l=w("div"),I=F(c),r=R(),n=w("button"),i=w("img"),u=R(),this.h()},l(v){e=D(v,"DIV",{class:!0});var k=V(e);o&&o.l(k),s=j(k),l=D(k,"DIV",{class:!0});var d=V(l);I=z(d,c),d.forEach(m),r=j(k),n=D(k,"BUTTON",{class:!0});var g=V(n);i=D(g,"IMG",{src:!0,alt:!0,class:!0}),g.forEach(m),u=j(k),k.forEach(m),this.h()},h(){b(l,"class","id svelte-cs31s5"),G(i.src,p="/assets/icons/x.svg")||b(i,"src",p),b(i,"alt","remove"),b(i,"class","svelte-cs31s5"),b(n,"class","remove svelte-cs31s5"),b(e,"class","user role not-manager svelte-cs31s5"),this.first=e},m(v,k){T(v,e,k),o&&o.m(e,null),y(e,s),y(e,l),y(l,I),y(e,r),y(e,n),y(n,i),y(e,u),E||($=A(n,"click",P(h)),E=!0)},p(v,k){t=v,k&12&&(a=t[3].has(t[19])),a?o?o.p(t,k):(o=W(t),o.c(),o.m(e,s)):o&&(o.d(1),o=null),k&4&&c!==(c=t[19]+"")&&J(I,c)},r(){U=e.getBoundingClientRect()},f(){ne(e),M()},a(){M(),M=oe(e,U,_e,{duration:200})},i(v){_||ce(()=>{_=ue(e,t[7],{key:t[19]}),_.start()})},o:B,d(v){v&&m(e),o&&o.d(),E=!1,$()}}}function Te(f){let t,e=f[16]+"",a;return{c(){t=w("div"),a=F(e),this.h()},l(s){t=D(s,"DIV",{class:!0});var l=V(t);a=z(l,e),l.forEach(m),this.h()},h(){b(t,"class","id svelte-cs31s5")},m(s,l){T(s,t,l),y(t,a)},p(s,l){l&1&&e!==(e=s[16]+"")&&J(a,e)},d(s){s&&m(t)}}}function Oe(f){let t=f[4].get(f[16]).avatar,e,a,s,l=f[4].get(f[16]).tag+"",c,I,r,n=f[16]+"",i,p=t&&Y(f);return{c(){p&&p.c(),e=R(),a=w("div"),s=w("div"),c=F(l),I=R(),r=w("div"),i=F(n),this.h()},l(u){p&&p.l(u),e=j(u),a=D(u,"DIV",{class:!0});var _=V(a);s=D(_,"DIV",{class:!0});var U=V(s);c=z(U,l),U.forEach(m),I=j(_),r=D(_,"DIV",{class:!0});var M=V(r);i=z(M,n),M.forEach(m),_.forEach(m),this.h()},h(){b(s,"class","tag svelte-cs31s5"),b(r,"class","id svelte-cs31s5"),b(a,"class","name svelte-cs31s5")},m(u,_){p&&p.m(u,_),T(u,e,_),T(u,a,_),y(a,s),y(s,c),y(a,I),y(a,r),y(r,i)},p(u,_){_&17&&(t=u[4].get(u[16]).avatar),t?p?p.p(u,_):(p=Y(u),p.c(),p.m(e.parentNode,e)):p&&(p.d(1),p=null),_&17&&l!==(l=u[4].get(u[16]).tag+"")&&J(c,l),_&1&&n!==(n=u[16]+"")&&J(i,n)},d(u){p&&p.d(u),u&&m(e),u&&m(a)}}}function Y(f){let t,e,a;return{c(){t=w("img"),this.h()},l(s){t=D(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){G(t.src,e=f[4].get(f[16]).avatarURL)||b(t,"src",e),b(t,"alt",a="avatar-"+f[16]),b(t,"class","avatar svelte-cs31s5")},m(s,l){T(s,t,l)},p(s,l){l&17&&!G(t.src,e=s[4].get(s[16]).avatarURL)&&b(t,"src",e),l&1&&a!==(a="avatar-"+s[16])&&b(t,"alt",a)},d(s){s&&m(t)}}}function x(f,t){let e,a,s,l,c,I,r,n,i,p,u=B,_,U;function M(h,v){return v&17&&(a=null),a==null&&(a=!!h[4].has(h[16])),a?Oe:Te}let E=M(t,-1),$=E(t);function o(){return t[13](t[16])}return{key:f,first:null,c(){e=w("div"),$.c(),s=R(),l=w("button"),c=w("img"),r=R(),this.h()},l(h){e=D(h,"DIV",{class:!0});var v=V(e);$.l(v),s=j(v),l=D(v,"BUTTON",{class:!0});var k=V(l);c=D(k,"IMG",{src:!0,alt:!0,class:!0}),k.forEach(m),r=j(v),v.forEach(m),this.h()},h(){G(c.src,I="/assets/icons/x.svg")||b(c,"src",I),b(c,"alt","remove"),b(c,"class","svelte-cs31s5"),b(l,"class","remove svelte-cs31s5"),b(e,"class",n="user "+(t[1].includes(t[16])?"manager":"not-manager")+" svelte-cs31s5"),this.first=e},m(h,v){T(h,e,v),$.m(e,null),y(e,s),y(e,l),y(l,c),y(e,r),_||(U=A(l,"click",P(o)),_=!0)},p(h,v){t=h,E===(E=M(t,v))&&$?$.p(t,v):($.d(1),$=E(t),$&&($.c(),$.m(e,s))),v&3&&n!==(n="user "+(t[1].includes(t[16])?"manager":"not-manager")+" svelte-cs31s5")&&b(e,"class",n)},r(){p=e.getBoundingClientRect()},f(){ne(e),u()},a(){u(),u=oe(e,p,_e,{duration:200})},i(h){i||ce(()=>{i=ue(e,t[7],{key:t[16]}),i.start()})},o:B,d(h){h&&m(e),$.d(),_=!1,U()}}}function Re(f){let t,e,a,s,l,c,I,r,n,i,p,u,_,U;const M=[$e,Ue],E=[];function $(o,h){return o[0]?0:1}return u=$(f),_=E[u]=M[u](f),{c(){t=R(),e=w("div"),a=w("div"),s=w("div"),l=w("h1"),c=F("Autorisierte User"),I=R(),r=w("p"),n=F("Die untenstehenden User sind berechtigt, Tickets, blockierte User und Snippets \xFCber das Dashboard anzusehen und zu bearbeiten."),i=R(),p=w("div"),_.c(),this.h()},l(o){be('[data-svelte="svelte-1q74krj"]',document.head).forEach(m),t=j(o),e=D(o,"DIV",{class:!0});var v=V(e);a=D(v,"DIV",{class:!0});var k=V(a);s=D(k,"DIV",{class:!0});var d=V(s);l=D(d,"H1",{});var g=V(l);c=z(g,"Autorisierte User"),g.forEach(m),I=j(d),r=D(d,"P",{class:!0});var O=V(r);n=z(O,"Die untenstehenden User sind berechtigt, Tickets, blockierte User und Snippets \xFCber das Dashboard anzusehen und zu bearbeiten."),O.forEach(m),d.forEach(m),i=j(k),p=D(k,"DIV",{class:!0});var S=V(p);_.l(S),S.forEach(m),k.forEach(m),v.forEach(m),this.h()},h(){document.title="FyFu Modmail",b(r,"class","svelte-cs31s5"),b(s,"class","text svelte-cs31s5"),b(p,"class","users svelte-cs31s5"),b(a,"class","box svelte-cs31s5"),b(e,"class","wrapper svelte-cs31s5")},m(o,h){T(o,t,h),T(o,e,h),y(e,a),y(a,s),y(s,l),y(l,c),y(s,I),y(s,r),y(r,n),y(a,i),y(a,p),E[u].m(p,null),U=!0},p(o,[h]){let v=u;u=$(o),u===v?E[u].p(o,h):(te(),L(E[v],1,1,()=>{E[v]=null}),ee(),_=E[u],_?_.p(o,h):(_=E[u]=M[u](o),_.c()),N(_,1),_.m(p,null))},i(o){U||(N(_),U=!0)},o(o){L(_),U=!1},d(o){o&&m(t),o&&m(e),E[u].d()}}}function je(f,t,e){const[a,s]=we({duration:h=>Math.sqrt(h*200),fallback(h,v){const k=getComputedStyle(h),d=k.transform==="none"?"":k.transform;return{duration:200,easing:De,css:g=>`
					transform: ${d} scale(${g});
					opacity: ${g}
				`}}});let l,c,I,r=new Map,n=new Map,i="",p=!1;ke(async()=>{u()});async function u(){let h=await fetch("/api/v1/authorized");if(h.status===200){let v=await h.json();e(0,l=v.userIds),e(1,c=v.managerIds),e(2,I=v.roleIds),_(),U()}}async function _(){let h=[...l],v=await fetch(`/api/v1/users?${h.map(k=>`userId=${k}`).join("&")}`);if(v.status===200){for(let k of await v.json())n.set(k.id,{...k,tag:`${k.username}#${k.discriminator}`,avatarURL:k.avatar?`https://cdn.discordapp.com/avatars/${k.id}/${k.avatar}.png`:"https://discord.com/assets/1f0bfc0865d324c2587920a7d80c609b.png"});e(4,n=Object.assign(n))}}async function U(){let h=await fetch("/api/v1/roles");if(h.status===200){for(let v of await h.json())r.set(v.id,v);e(3,r=Object.assign(r))}}function M(){i=this.value,e(5,i)}return[l,c,I,r,n,i,p,s,u,U,M,async()=>{if(p)return;e(6,p=!0),await U(),(await fetch("/api/v1/authorized",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:i,type:r.has(i)?"role":"user"})})).status===204&&u(),e(5,i=""),e(6,p=!1)},async h=>{await fetch("/api/v1/authorized",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:h})}),u()},async h=>{await fetch("/api/v1/authorized",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:h})}),u()}]}class Fe extends pe{constructor(t){super(),me(this,t,je,Re,ge,{})}}export{Fe as default};
